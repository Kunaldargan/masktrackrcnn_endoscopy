import os
import sys

config_file = "masktrack_rcnn_r50_fpn_1x_youtubevos.py"
weight_file_path ="/scratch/cse/msr/siy207566/checkpoints/work_dirs_endoVis_fold0/masktrack_rcnn_r50_fpn_1x_youtubevos"
output_sufix = "endoVis_fold0"
output_labels = "/scratch/cse/msr/siy207566/output_labels/"

for epoch in os.listdir(weight_file_path): 
	weight_file=os.path.join(weight_file_path, epoch)
	epoch_pkl = epoch.split(".")[0]+".pkl"
	txt_path = os.path.join(output_labels+,epoch)
	command = "python3 tools/test_video.py configs/"+config_file+" "+weight_file+" --out "+"output_"+output_labels+output_sufix+"_"+epoch_pkl+" --eval segm --save_path ./data/save/ 2>&1 | tee  "+output_labels+output_sufix+
	print(command)
	os.system(command)
